{"version":3,"sources":["components/Users/Users.module.css","../node_modules/classnames/index.js","components/Users/Users.jsx","components/Users/UsersContainer.jsx"],"names":["module","exports","hasOwn","hasOwnProperty","classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","toString","Object","prototype","key","call","join","default","Button","props","FollowControl","userId","user","id","userFollowed","followed","followingInProgress","followingUser","unfollowingUser","to","target","className","s","button","UserLabel","u","min","src","photos","large","userTextDescription","userFullName","name","userStatus","status","userLocation","cityCountry","userCityCountry","PageSlider","portionCount","Math","ceil","pages","useState","portionNumber","setPortionNumber","left","right","slider","pageButton","onClick","filter","p","map","onPageChanged","cn","selected","currentPage","UsersList","users","label","flex","FriendsList","friends","isAuth","Users","connect","state","getIsAuth","getUsers","getFriends","pageSize","getPageSize","totalUsersCount","getTotalUsersCount","getCurrentPage","totalFriendsCount","getTotalFriendsCount","isFetching","getIsFetching","getFollowingInProgress","followUser","unfollowUser","setCurrentPage","toggleFollowingProgress","getUsersThunkCreator","getFriendsThunkCreator","followUserThunkCreator","unfollowUserThunkCreator","useEffect","currentFriendPage","pagesCount","Preloader","pageNumber"],"mappings":"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","file":"static/js/4.555f6cc8.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"users\":\"Users_users__3xWl7\",\"friends\":\"Users_friends__11c5J\",\"label\":\"Users_label__ir8A5\",\"flex\":\"Users_flex__1gJK_\",\"min\":\"Users_min__3z587\",\"user\":\"Users_user__2DpFJ\",\"userTextDescription\":\"Users_userTextDescription__2ATVm\",\"userFullName\":\"Users_userFullName__2C3_H\",\"userStatus\":\"Users_userStatus__1MLzq\",\"userLocation\":\"Users_userLocation__1sGxj\",\"cityCountry\":\"Users_cityCountry__3manJ\",\"userCityCountry\":\"Users_userCityCountry__1PDCn\",\"button\":\"Users_button__BpvNl\",\"slider\":\"Users_slider__1VFYJ\",\"pageButton\":\"Users_pageButton__1Fyqk\",\"selected\":\"Users_selected__3M9hQ\"};","/*!\n  Copyright (c) 2018 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString === Object.prototype.toString) {\n\t\t\t\t\tfor (var key in arg) {\n\t\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import React, {useEffect, useState} from 'react';\r\nimport {NavLink} from \"react-router-dom\";\r\nimport FollowControl from \"../common/FollowControl/FollowControl\";\r\nimport s from './Users.module.css';\r\nimport cn from \"classnames\";\r\n\r\nconst Button = (props) => {\r\n    return <div>\r\n        <div>\r\n            <FollowControl userId={props.user.id}\r\n                           userFollowed={props.user.followed}\r\n                           followingInProgress={props.followingInProgress}\r\n                           followingUser={props.followingUser}\r\n                           unfollowingUser={props.unfollowingUser}/>\r\n        </div>\r\n        <div>\r\n            <NavLink to={\"/profile/\" + props.user.id} target=\"_blank\">\r\n                <button className={s.button}>New tab</button>\r\n            </NavLink>\r\n            {/*\tTODO переделай этот позор..............*/}\r\n        </div>\r\n    </div>\r\n};\r\n\r\nconst UserLabel = (props) => {\r\n    return <div className={s.user}>\r\n        <NavLink to={\"/profile/\" + props.u.id} className={s.min}>\r\n            <img src={props.u.photos.large != null\r\n                ? props.u.photos.large\r\n                : 'https://slovnet.ru/wp-content/uploads/2018/12/7-67.jpg'}/>\r\n        </NavLink>\r\n\r\n        <div className={s.userTextDescription}>\r\n            <div className={s.userFullName}>\r\n                {/*{props.u.firstName + ' ' + props.u.lastName}*/}\r\n                {props.u.name}\r\n            </div>\r\n            <div className={s.userStatus}>\r\n                {props.u.status}\r\n            </div>\r\n            <div className={s.userLocation}>\r\n                <splan>\r\n                    <div className={s.cityCountry}>\r\n                        <div>City:</div>\r\n                        <div>Country:</div>\r\n                    </div>\r\n                    <div className={s.userCityCountry}>\r\n                        <div>props.u.location.city</div>\r\n                        <div>props.u.location.country</div>\r\n                    </div>\r\n                </splan>\r\n            </div>\r\n        </div>\r\n    </div>\r\n};\r\n\r\nconst PageSlider = (props) => {\r\n    //TODO вынести в common\r\n    let portionSize = 7\r\n    let portionCount = Math.ceil(props.pages.length / portionSize)\r\n    let [portionNumber, setPortionNumber] = useState(1);\r\n    let left = (portionNumber - 1) * portionSize + 1\r\n    let right = portionNumber * portionSize\r\n\r\n    return <div className={s.slider}>\r\n\r\n        {portionNumber > 1 &&\r\n            <button className={s.pageButton} onClick={() => setPortionNumber(1)}>❮❮</button>}\r\n        {portionNumber > 1 &&\r\n            <button className={s.pageButton} onClick={() => setPortionNumber(portionNumber - 1)}>❮</button>}\r\n\r\n        {\r\n            props.pages.filter(p => p >= left && p <= right)\r\n                .map(p => <span>\r\n\t\t\t\t\t<button onClick={() => props.onPageChanged(p)}\r\n                            className={// props.currentPage === p && s.selected || s.pageButton\r\n                                        cn(s.pageButton, {[s.selected]: props.currentPage === p})}>\r\n                        {p}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</span>)\r\n        }\r\n\r\n        {portionNumber < portionCount &&\r\n            <button className={s.pageButton} onClick={() => setPortionNumber(portionNumber + 1)}>❯</button>}\r\n        {portionNumber < portionCount &&\r\n            <button className={s.pageButton} onClick={() => setPortionNumber(portionCount)}>❯❯</button>}\r\n\r\n    </div>\r\n};\r\n\r\nconst UsersList = (props) => {\r\n    return <div className={s.users}>\r\n        <div className={s.label}>Guys:</div>\r\n        <PageSlider pages={props.pages}\r\n                    onPageChanged={props.onPageChanged}\r\n                    currentPage={props.currentPage}/>\r\n        {props.users.map(user =>\r\n            <div key={user.id} className={s.flex}>\r\n                <UserLabel u={user}/>\r\n                <Button user={user}\r\n                        followingInProgress={props.followingInProgress}\r\n                        followingUser={props.followingUser}\r\n                        unfollowingUser={props.unfollowingUser}/>\r\n            </div>\r\n        )}\r\n    </div>\r\n};\r\n\r\nconst FriendsList = (props) => {\r\n    return <div className={s.friends}>\r\n        <div className={s.label}>{props.isAuth ? \"Friends:\" : \"Please Login to see your friends\"}</div>\r\n        {props.friends.map(friends => {\r\n            return <div key={friends.id} className={s.flex}>\r\n                <UserLabel u={friends}/>\r\n                <Button user={friends}\r\n                        followingInProgress={props.followingInProgress}\r\n                        followingUser={props.followingUser}\r\n                        unfollowingUser={props.unfollowingUser}/>\r\n            </div>\r\n        })}\r\n    </div>\r\n};\r\n\r\nconst Users = (props) => {\r\n    return <div className={s.flex}>\r\n        <UsersList pages={props.pages}\r\n                   onPageChanged={props.onPageChanged}\r\n                   currentPage={props.currentPage}\r\n                   users={props.users}\r\n                   followingInProgress={props.followingInProgress}\r\n                   followingUser={props.followingUser}\r\n                   unfollowingUser={props.unfollowingUser}/>\r\n        <FriendsList isAuth={props.isAuth}\r\n                     friends={props.friends}\r\n                     followingInProgress={props.followingInProgress}\r\n                     followingUser={props.followingUser}\r\n                     unfollowingUser={props.unfollowingUser}/>\r\n    </div>\r\n};\r\n\r\nexport default Users;","import React, {useEffect} from 'react';\r\nimport {connect} from \"react-redux\";\r\n\r\nimport Users from \"./Users\";\r\nimport Preloader from \"../common/Preloader/Preloader\";\r\nimport {\r\n    followUser, followUserThunkCreator, getFriendsThunkCreator, getUsersThunkCreator,\r\n    setCurrentPage, toggleFollowingProgress,\r\n    unfollowUser, unfollowUserThunkCreator\r\n} from \"../../redux/users-reducer\";\r\nimport {\r\n    getCurrentPage, getFollowingInProgress,\r\n    getFriends,\r\n    getIsAuth, getIsFetching,\r\n    getPageSize, getTotalFriendsCount,\r\n    getTotalUsersCount,\r\n    getUsers\r\n} from \"../../redux/getters-selectors\";\r\n\r\n\r\nconst UsersContainer = (props) => {\r\n    useEffect(() => {\r\n        props.getUsersThunkCreator(props.currentPage, props.pageSize)\r\n        props.getFriendsThunkCreator(props.currentFriendPage, props.pageSize)\r\n    }, [])\r\n\r\n    const onPageChanged = (pageNumber) =>\r\n        props.getUsersThunkCreator(pageNumber, props.pageSize)\r\n\r\n    const followingUser = (userId) => props.followUserThunkCreator(userId)\r\n    const unfollowingUser = (userId) => props.unfollowUserThunkCreator(userId)\r\n\r\n    let pagesCount = Math.ceil(props.totalUsersCount / props.pageSize)\r\n    let pages = []\r\n    for (let i = 1; i <= pagesCount; i++) pages.push(i)\r\n\r\n    return <>\r\n        {props.isFetching\r\n            //TODO добавить везде эту хуету с прелодарем\r\n            ? <Preloader/>\r\n            : <Users isAuth={props.isAuth}\r\n\r\n                     pages={pages}\r\n                     onPageChanged={onPageChanged}\r\n                     currentPage={props.currentPage}\r\n\r\n                     users={props.users}\r\n                     friends={props.friends}\r\n\r\n                     followingUser={followingUser}\r\n                     unfollowingUser={unfollowingUser}\r\n                     followingInProgress={props.followingInProgress}/>}\r\n    </>\r\n\r\n};\r\n\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        isAuth: getIsAuth(state),\r\n        users: getUsers(state),\r\n        friends: getFriends(state),\r\n\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getTotalUsersCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        totalFriendsCount: getTotalFriendsCount(state),\r\n\r\n        isFetching: getIsFetching(state),\r\n        followingInProgress: getFollowingInProgress(state),\r\n    }\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    {\r\n        followUser, unfollowUser, setCurrentPage, toggleFollowingProgress,\r\n        getUsersThunkCreator, getFriendsThunkCreator,\r\n        followUserThunkCreator, unfollowUserThunkCreator\r\n    })\r\n(UsersContainer);\r\n"],"sourceRoot":""}