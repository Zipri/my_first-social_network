{"version":3,"sources":["components/Users/Users.module.css","components/Users/Users.jsx","components/Users/UsersContainer.jsx"],"names":["module","exports","Button","props","FollowControl","userId","user","id","userFollowed","followed","followingInProgress","followingUser","unfollowingUser","to","target","className","s","button","UserLabel","u","min","src","photos","large","userTextDescription","userFullName","name","userStatus","status","userLocation","cityCountry","userCityCountry","PageSlider","portionCount","Math","ceil","pages","length","useState","portionNumber","setPortionNumber","left","right","slider","pageButton","onClick","filter","p","map","onPageChanged","cn","selected","currentPage","UsersList","users","label","flex","FriendsList","friends","isAuth","Users","connect","state","getIsAuth","getUsers","getFriends","pageSize","getPageSize","totalUsersCount","getTotalUsersCount","getCurrentPage","totalFriendsCount","getTotalFriendsCount","isFetching","getIsFetching","getFollowingInProgress","followUser","unfollowUser","setCurrentPage","toggleFollowingProgress","getUsersThunkCreator","getFriendsThunkCreator","followUserThunkCreator","unfollowUserThunkCreator","useEffect","currentFriendPage","pagesCount","i","push","Preloader","pageNumber"],"mappings":"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","file":"static/js/7.1c4083be.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"users\":\"Users_users__3xWl7\",\"friends\":\"Users_friends__11c5J\",\"label\":\"Users_label__ir8A5\",\"flex\":\"Users_flex__1gJK_\",\"min\":\"Users_min__3z587\",\"user\":\"Users_user__2DpFJ\",\"userTextDescription\":\"Users_userTextDescription__2ATVm\",\"userFullName\":\"Users_userFullName__2C3_H\",\"userStatus\":\"Users_userStatus__1MLzq\",\"userLocation\":\"Users_userLocation__1sGxj\",\"cityCountry\":\"Users_cityCountry__3manJ\",\"userCityCountry\":\"Users_userCityCountry__1PDCn\",\"button\":\"Users_button__BpvNl\",\"slider\":\"Users_slider__1VFYJ\",\"pageButton\":\"Users_pageButton__1Fyqk\",\"selected\":\"Users_selected__3M9hQ\"};","import React, {useEffect, useState} from 'react';\r\nimport {NavLink} from \"react-router-dom\";\r\nimport FollowControl from \"../common/FollowControl/FollowControl\";\r\nimport s from './Users.module.css';\r\nimport cn from \"classnames\";\r\n\r\nconst Button = (props) => {\r\n    return <div>\r\n        <div>\r\n            <FollowControl userId={props.user.id}\r\n                           userFollowed={props.user.followed}\r\n                           followingInProgress={props.followingInProgress}\r\n                           followingUser={props.followingUser}\r\n                           unfollowingUser={props.unfollowingUser}/>\r\n        </div>\r\n        <div>\r\n            <NavLink to={\"/profile/\" + props.user.id} target=\"_blank\">\r\n                <button className={s.button}>New tab</button>\r\n            </NavLink>\r\n            {/*\tTODO переделай этот позор..............*/}\r\n        </div>\r\n    </div>\r\n};\r\n\r\nconst UserLabel = (props) => {\r\n    return <div className={s.user}>\r\n        <NavLink to={\"/profile/\" + props.u.id} className={s.min}>\r\n            <img src={props.u.photos.large != null\r\n                ? props.u.photos.large\r\n                : 'https://slovnet.ru/wp-content/uploads/2018/12/7-67.jpg'}/>\r\n        </NavLink>\r\n\r\n        <div className={s.userTextDescription}>\r\n            <div className={s.userFullName}>\r\n                {/*{props.u.firstName + ' ' + props.u.lastName}*/}\r\n                {props.u.name}\r\n            </div>\r\n            <div className={s.userStatus}>\r\n                {props.u.status}\r\n            </div>\r\n            <div className={s.userLocation}>\r\n                <splan>\r\n                    <div className={s.cityCountry}>\r\n                        <div>City:</div>\r\n                        <div>Country:</div>\r\n                    </div>\r\n                    <div className={s.userCityCountry}>\r\n                        <div>props.u.location.city</div>\r\n                        <div>props.u.location.country</div>\r\n                    </div>\r\n                </splan>\r\n            </div>\r\n        </div>\r\n    </div>\r\n};\r\n\r\nconst PageSlider = (props) => {\r\n    //TODO вынести в common\r\n    let portionSize = 7\r\n    let portionCount = Math.ceil(props.pages.length / portionSize)\r\n    let [portionNumber, setPortionNumber] = useState(1);\r\n    let left = (portionNumber - 1) * portionSize + 1\r\n    let right = portionNumber * portionSize\r\n\r\n    return <div className={s.slider}>\r\n\r\n        {portionNumber > 1 &&\r\n            <button className={s.pageButton} onClick={() => setPortionNumber(1)}>❮❮</button>}\r\n        {portionNumber > 1 &&\r\n            <button className={s.pageButton} onClick={() => setPortionNumber(portionNumber - 1)}>❮</button>}\r\n\r\n        {\r\n            props.pages.filter(p => p >= left && p <= right)\r\n                .map(p => <span>\r\n\t\t\t\t\t<button onClick={() => props.onPageChanged(p)}\r\n                            className={// props.currentPage === p && s.selected || s.pageButton\r\n                                        cn(s.pageButton, {[s.selected]: props.currentPage === p})}>\r\n                        {p}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</span>)\r\n        }\r\n\r\n        {portionNumber < portionCount &&\r\n            <button className={s.pageButton} onClick={() => setPortionNumber(portionNumber + 1)}>❯</button>}\r\n        {portionNumber < portionCount &&\r\n            <button className={s.pageButton} onClick={() => setPortionNumber(portionCount)}>❯❯</button>}\r\n\r\n    </div>\r\n};\r\n\r\nconst UsersList = (props) => {\r\n    return <div className={s.users}>\r\n        <div className={s.label}>Guys:</div>\r\n        <PageSlider pages={props.pages}\r\n                    onPageChanged={props.onPageChanged}\r\n                    currentPage={props.currentPage}/>\r\n        {props.users.map(user =>\r\n            <div key={user.id} className={s.flex}>\r\n                <UserLabel u={user}/>\r\n                <Button user={user}\r\n                        followingInProgress={props.followingInProgress}\r\n                        followingUser={props.followingUser}\r\n                        unfollowingUser={props.unfollowingUser}/>\r\n            </div>\r\n        )}\r\n    </div>\r\n};\r\n\r\nconst FriendsList = (props) => {\r\n    return <div className={s.friends}>\r\n        <div className={s.label}>{props.isAuth ? \"Friends:\" : \"Please Login to see your friends\"}</div>\r\n        {props.friends.map(friends => {\r\n            return <div key={friends.id} className={s.flex}>\r\n                <UserLabel u={friends}/>\r\n                <Button user={friends}\r\n                        followingInProgress={props.followingInProgress}\r\n                        followingUser={props.followingUser}\r\n                        unfollowingUser={props.unfollowingUser}/>\r\n            </div>\r\n        })}\r\n    </div>\r\n};\r\n\r\nconst Users = (props) => {\r\n    return <div className={s.flex}>\r\n        <UsersList pages={props.pages}\r\n                   onPageChanged={props.onPageChanged}\r\n                   currentPage={props.currentPage}\r\n                   users={props.users}\r\n                   followingInProgress={props.followingInProgress}\r\n                   followingUser={props.followingUser}\r\n                   unfollowingUser={props.unfollowingUser}/>\r\n        <FriendsList isAuth={props.isAuth}\r\n                     friends={props.friends}\r\n                     followingInProgress={props.followingInProgress}\r\n                     followingUser={props.followingUser}\r\n                     unfollowingUser={props.unfollowingUser}/>\r\n    </div>\r\n};\r\n\r\nexport default Users;","import React, {useEffect} from 'react';\r\nimport {connect} from \"react-redux\";\r\n\r\nimport Users from \"./Users\";\r\nimport Preloader from \"../common/Preloader/Preloader\";\r\nimport {\r\n    followUser, followUserThunkCreator, getFriendsThunkCreator, getUsersThunkCreator,\r\n    setCurrentPage, toggleFollowingProgress,\r\n    unfollowUser, unfollowUserThunkCreator\r\n} from \"../../redux/users-reducer\";\r\nimport {\r\n    getCurrentPage, getFollowingInProgress,\r\n    getFriends,\r\n    getIsAuth, getIsFetching,\r\n    getPageSize, getTotalFriendsCount,\r\n    getTotalUsersCount,\r\n    getUsers\r\n} from \"../../redux/getters-selectors\";\r\n\r\n\r\nconst UsersContainer = (props) => {\r\n    useEffect(() => {\r\n        props.getUsersThunkCreator(props.currentPage, props.pageSize)\r\n        props.getFriendsThunkCreator(props.currentFriendPage, props.pageSize)\r\n    }, [])\r\n\r\n    const onPageChanged = (pageNumber) =>\r\n        props.getUsersThunkCreator(pageNumber, props.pageSize)\r\n\r\n    const followingUser = (userId) => props.followUserThunkCreator(userId)\r\n    const unfollowingUser = (userId) => props.unfollowUserThunkCreator(userId)\r\n\r\n    let pagesCount = Math.ceil(props.totalUsersCount / props.pageSize)\r\n    let pages = []\r\n    for (let i = 1; i <= pagesCount; i++) pages.push(i)\r\n\r\n    return <>\r\n        {props.isFetching\r\n            //TODO добавить везде эту хуету с прелодарем\r\n            ? <Preloader/>\r\n            : <Users isAuth={props.isAuth}\r\n\r\n                     pages={pages}\r\n                     onPageChanged={onPageChanged}\r\n                     currentPage={props.currentPage}\r\n\r\n                     users={props.users}\r\n                     friends={props.friends}\r\n\r\n                     followingUser={followingUser}\r\n                     unfollowingUser={unfollowingUser}\r\n                     followingInProgress={props.followingInProgress}/>}\r\n    </>\r\n\r\n};\r\n\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        isAuth: getIsAuth(state),\r\n        users: getUsers(state),\r\n        friends: getFriends(state),\r\n\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getTotalUsersCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        totalFriendsCount: getTotalFriendsCount(state),\r\n\r\n        isFetching: getIsFetching(state),\r\n        followingInProgress: getFollowingInProgress(state),\r\n    }\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    {\r\n        followUser, unfollowUser, setCurrentPage, toggleFollowingProgress,\r\n        getUsersThunkCreator, getFriendsThunkCreator,\r\n        followUserThunkCreator, unfollowUserThunkCreator\r\n    })\r\n(UsersContainer);\r\n"],"sourceRoot":""}