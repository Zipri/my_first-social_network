{"version":3,"sources":["components/Users/Users.module.css","components/Users/Users.jsx","components/Users/UsersContainer.jsx"],"names":["module","exports","FollowButton","props","className","s","button","disabled","followingInProgress","some","id","userId","onClick","followingUser","UnfollowButton","unfollowingUser","Button","user","followed","to","target","UserLabel","u","min","src","photos","large","userTextDescription","userFullName","name","userStatus","status","userLocation","cityCountry","userCityCountry","PageSlider","portionCount","Math","ceil","pages","length","useState","portionNumber","setPortionNumber","left","right","slider","pageButton","filter","p","map","onPageChanged","currentPage","selected","UsersList","users","label","flex","FriendsList","friends","isAuth","friendPages","onFriendPageChanged","currentFriendPage","Users","UsersContainer","pageNumber","getUsersThunkCreator","pageSize","getFriendsThunkCreator","followUserThunkCreator","unfollowUserThunkCreator","this","pagesCount","totalUsersCount","i","push","pagesFriendsCount","totalFriendsCount","isFetching","Preloader","React","Component","connect","state","getIsAuth","getUsers","getFriends","getPageSize","getTotalUsersCount","getCurrentPage","getTotalFriendsCount","getCurrentFriendPage","getIsFetching","getFollowingInProgress","followUser","unfollowUser","setCurrentPage","toggleFollowingProgress"],"mappings":"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","file":"static/js/7.dcd88dac.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"users\":\"Users_users__3xWl7\",\"friends\":\"Users_friends__11c5J\",\"label\":\"Users_label__ir8A5\",\"flex\":\"Users_flex__1gJK_\",\"min\":\"Users_min__3z587\",\"user\":\"Users_user__2DpFJ\",\"userTextDescription\":\"Users_userTextDescription__2ATVm\",\"userFullName\":\"Users_userFullName__2C3_H\",\"userStatus\":\"Users_userStatus__1MLzq\",\"userLocation\":\"Users_userLocation__1sGxj\",\"cityCountry\":\"Users_cityCountry__3manJ\",\"userCityCountry\":\"Users_userCityCountry__1PDCn\",\"button\":\"Users_button__BpvNl\",\"slider\":\"Users_slider__1VFYJ\",\"pageButton\":\"Users_pageButton__1Fyqk\",\"selected\":\"Users_selected__3M9hQ\"};","import React, {useState} from 'react';\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nimport s from './Users.module.css';\r\n\r\nconst FollowButton = (props) => {\r\n    return <button className={s.button}\r\n                   disabled={props.followingInProgress.some(id => id === props.userId)}\r\n                   onClick={() => props.followingUser(props.userId)}>✔️ Follow\r\n    </button>\r\n};\r\n\r\nconst UnfollowButton = (props) => {\r\n    return <button className={s.button}\r\n                   disabled={props.followingInProgress.some(id => id === props.userId)}\r\n                   onClick={() => props.unfollowingUser(props.userId)}>❌ Unfollow\r\n    </button>\r\n};\r\n//TODO заебал код дулбировать - исправляй нахуй эту ссанину ещё и в profile\r\n\r\nconst Button = (props) => {\r\n    return <div>\r\n        <div>\r\n            {props.user.followed\r\n                ? <UnfollowButton userId={props.user.id}\r\n                                  followingInProgress={props.followingInProgress}\r\n                                  unfollowingUser={props.unfollowingUser}/>\r\n                : <FollowButton userId={props.user.id}\r\n                                followingInProgress={props.followingInProgress}\r\n                                followingUser={props.followingUser}/>}\r\n        </div>\r\n        <div>\r\n            <NavLink to={\"/profile/\" + props.user.id} target=\"_blank\">\r\n                <button className={s.button}>New tab</button>\r\n            </NavLink>\r\n            {/*\tTODO переделай этот позор..............*/}\r\n        </div>\r\n    </div>\r\n};\r\n\r\nconst UserLabel = (props) => {\r\n    return <div className={s.user}>\r\n        <NavLink to={\"/profile/\" + props.u.id} className={s.min}>\r\n            <img src={props.u.photos.large != null\r\n                ? props.u.photos.large\r\n                : 'https://slovnet.ru/wp-content/uploads/2018/12/7-67.jpg'}/>\r\n        </NavLink>\r\n\r\n        <div className={s.userTextDescription}>\r\n            <div className={s.userFullName}>\r\n                {/*{props.u.firstName + ' ' + props.u.lastName}*/}\r\n                {props.u.name}\r\n            </div>\r\n            <div className={s.userStatus}>\r\n                {props.u.status}\r\n            </div>\r\n            <div className={s.userLocation}>\r\n                <splan>\r\n                    <div className={s.cityCountry}>\r\n                        <div>City:</div>\r\n                        <div>Country:</div>\r\n                    </div>\r\n                    <div className={s.userCityCountry}>\r\n                        <div>props.u.location.city</div>\r\n                        <div>props.u.location.country</div>\r\n                    </div>\r\n                </splan>\r\n            </div>\r\n        </div>\r\n    </div>\r\n};\r\n\r\nconst PageSlider = (props) => {\r\n    let portionSize = 7\r\n    let portionCount = Math.ceil(props.pages.length / portionSize)\r\n    let [portionNumber, setPortionNumber] = useState(1);\r\n    let left = (portionNumber - 1) * portionSize + 1\r\n    let right = portionNumber * portionSize\r\n\r\n    return <div className={s.slider}>\r\n\r\n        {portionNumber > 1 &&\r\n            <button className={s.pageButton} onClick={() => setPortionNumber(1)}>❮❮</button>}\r\n        {portionNumber > 1 &&\r\n            <button className={s.pageButton} onClick={() => setPortionNumber(portionNumber - 1)}>❮</button>}\r\n\r\n        {\r\n            props.pages.filter(p => p >= left && p <= right)\r\n                .map(p => <span>\r\n\t\t\t\t\t<button\r\n                        onClick={() => props.onPageChanged(p)}\r\n                        className={props.currentPage === p && s.selected || s.pageButton}>\r\n\t\t\t\t\t\t\t{p}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</span>)\r\n        }\r\n\r\n        {portionNumber < portionCount &&\r\n            <button className={s.pageButton} onClick={() => setPortionNumber(portionNumber + 1)}>❯</button>}\r\n        {portionNumber < portionCount &&\r\n            <button className={s.pageButton} onClick={() => setPortionNumber(portionCount)}>❯❯</button>}\r\n\r\n    </div>\r\n};\r\n\r\nconst UsersList = (props) => {\r\n    return <div className={s.users}>\r\n        <div className={s.label}>Guys:</div>\r\n        <PageSlider pages={props.pages}\r\n                    onPageChanged={props.onPageChanged}\r\n                    currentPage={props.currentPage}/>\r\n        {props.users.map(user =>\r\n            <div key={user.id} className={s.flex}>\r\n                <UserLabel u={user}/>\r\n                <Button user={user}\r\n                        followingInProgress={props.followingInProgress}\r\n                        followingUser={props.followingUser}\r\n                        unfollowingUser={props.unfollowingUser}/>\r\n            </div>\r\n        )}\r\n    </div>\r\n};\r\n\r\nconst FriendsList = (props) => {\r\n    return <div className={s.friends}>\r\n        <div className={s.label}>{props.isAuth ? \"Friends:\" : \"Please Login to see your friends\"}</div>\r\n        <PageSlider pages={props.friendPages}\r\n                    onPageChanged={props.onFriendPageChanged}\r\n                    currentPage={props.currentFriendPage}/>\r\n        {props.friends.map(friends => {\r\n            return <div key={friends.id} className={s.flex}>\r\n                <UserLabel u={friends}/>\r\n                <Button user={friends}\r\n                        followingInProgress={props.followingInProgress}\r\n                        followingUser={props.followingUser}\r\n                        unfollowingUser={props.unfollowingUser}/>\r\n            </div>\r\n        })}\r\n    </div>\r\n};\r\n\r\nconst Users = (props) => {\r\n    return <div className={s.flex}>\r\n        <UsersList pages={props.pages}\r\n                   onPageChanged={props.onPageChanged}\r\n                   currentPage={props.currentPage}\r\n                   users={props.users}\r\n                   followingInProgress={props.followingInProgress}\r\n                   followingUser={props.followingUser}\r\n                   unfollowingUser={props.unfollowingUser}/>\r\n        <FriendsList isAuth={props.isAuth}\r\n                     friends={props.friends}\r\n                     friendPages={props.friendPages}\r\n                     onFriendPageChanged={props.onFriendPageChanged}\r\n                     currentFriendPage={props.currentFriendPage}\r\n                     followingInProgress={props.followingInProgress}\r\n                     followingUser={props.followingUser}\r\n                     unfollowingUser={props.unfollowingUser}/>\r\n    </div>\r\n};\r\n\r\nexport default Users;","import React from 'react';\r\nimport {connect} from \"react-redux\";\r\n\r\nimport Users from \"./Users\";\r\nimport Preloader from \"../common/Preloader/Preloader\";\r\nimport {\r\n    followUser, followUserThunkCreator, getFriendsThunkCreator, getUsersThunkCreator,\r\n    setCurrentPage, toggleFollowingProgress,\r\n    unfollowUser, unfollowUserThunkCreator\r\n} from \"../../redux/users-reducer\";\r\nimport {\r\n    getCurrentFriendPage,\r\n    getCurrentPage, getFollowingInProgress,\r\n    getFriends,\r\n    getIsAuth, getIsFetching,\r\n    getPageSize, getTotalFriendsCount,\r\n    getTotalUsersCount,\r\n    getUsers\r\n} from \"../../redux/getters-selectors\";\r\n\r\n\r\nclass UsersContainer extends React.Component {\r\n    componentDidMount() {\r\n        this.props.getUsersThunkCreator(this.props.currentPage, this.props.pageSize)\r\n        this.props.getFriendsThunkCreator(this.props.currentFriendPage, this.props.pageSize)\r\n    }\r\n\r\n    onPageChanged = (pageNumber) =>\r\n        this.props.getUsersThunkCreator(pageNumber, this.props.pageSize)\r\n    onFriendPageChanged = (pageNumber) =>\r\n        this.props.getFriendsThunkCreator(pageNumber, this.props.pageSize)\r\n\r\n    followingUser = (userId) =>\r\n        this.props.followUserThunkCreator(userId)\r\n    unfollowingUser = (userId) =>\r\n        this.props.unfollowUserThunkCreator(userId)\r\n\r\n    render() {\r\n        let pagesCount = Math.ceil(this.props.totalUsersCount / this.props.pageSize)\r\n        let pages = []\r\n        for (let i = 1; i <= pagesCount; i++) pages.push(i)\r\n\r\n        let pagesFriendsCount = Math.ceil(this.props.totalFriendsCount / this.props.pageSize)\r\n        let friendPages = []\r\n        for (let i = 1; i <= pagesFriendsCount; i++) friendPages.push(i)\r\n\r\n        return <>\r\n            {this.props.isFetching\r\n                //TODO добавить везде эту хуету с прелодарем\r\n                ? <Preloader/>\r\n                : <Users isAuth={this.props.isAuth}\r\n\r\n                         pages={pages}\r\n                         onPageChanged={this.onPageChanged}\r\n                         currentPage={this.props.currentPage}\r\n\r\n                         friendPages={friendPages}\r\n                         onFriendPageChanged={this.onFriendPageChanged}\r\n                         currentFriendPage={this.props.currentFriendPage}\r\n\r\n                         users={this.props.users}\r\n                         friends={this.props.friends}\r\n\r\n                         followingUser={this.followingUser}\r\n                         unfollowingUser={this.unfollowingUser}\r\n                         followingInProgress={this.props.followingInProgress}/>}\r\n        </>\r\n    }\r\n};\r\n\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        isAuth: getIsAuth(state),\r\n        users: getUsers(state),\r\n        friends: getFriends(state),\r\n\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getTotalUsersCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        totalFriendsCount: getTotalFriendsCount(state),\r\n        currentFriendPage: getCurrentFriendPage(state),\r\n\r\n        isFetching: getIsFetching(state),\r\n        followingInProgress: getFollowingInProgress(state),\r\n    }\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    {\r\n        followUser, unfollowUser, setCurrentPage, toggleFollowingProgress,\r\n        getUsersThunkCreator, getFriendsThunkCreator,\r\n        followUserThunkCreator, unfollowUserThunkCreator\r\n    })\r\n(UsersContainer);\r\n"],"sourceRoot":""}